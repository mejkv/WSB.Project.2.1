@page
@model AirShop.WebApp.Pages.GetAndPostMethodModel
@{
    ViewData["Title"] = "Home page";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blazoner Product Management</title>
    <link rel="stylesheet" href="~/css/sklep.css" asp-append-version="true" />
</head>
<body>

    <!--ShoppingCart icon, trzeba dodac gdzies tutaj ikone z koszykiem-->

    <section class="shop" id="shop">
        <div class="container">
            @foreach (var product in Model.Products)
            {
                <div class="box">
                    <!--<img src="">-->
                    <h4>@product.Name</h4>
                    <h5>@product.Price$</h5>
                    <button class="addToCart" onclick="addToCart(@product.ProductId)">
                    Dodaj do koszyka</button>
                </div>
            }
        </div>
    </section>

    <script>async function FetchProducts() {
            try {
                // Call your C# method to get the products
                var products = await DotNet.invokeMethodAsync('AirShop.WebApp.Pages', 'GetProducts');

                // Add products to the table
                products.forEach(product => AddProductToTable(product));
            } catch (error) {
                console.error('Error:', error);
            }
        }

        //function AddProductToTable(product) {
        //    var tableBody = document.getElementById("productBody");
        //    var row = tableBody.insertRow();

            // Insert cells with product data
         //   var cell1 = row.insertCell(0);
         //   var cell2 = row.insertCell(1);
           // var cell3 = row.insertCell(2);
            //var cell4 = row.insertCell(3);
            //var cell5 = row.insertCell(4);
            //var cell6 = row.insertCell(5);

            //cell1.innerHTML = product.productId;
            //cell2.innerHTML = product.name;
            //cell3.innerHTML = product.value;
            //cell4.innerHTML = product.vat;
            //cell5.innerHTML = product.price;
            //cell6.innerHTML = product.discount;
        }

        // Fetch and display existing products on page load
        FetchProducts();</script>
    @* <script>
            function addToCart(productId, event) {
                event.preventDefault(); // Zatrzymaj domyślne zachowanie formularza

                // Wywołaj metodę AddToCart z modelu
                DotNet.invokeMethodAsync('AirShop.WebApp.Pages', 'AddToCart', productId);

        </script>*@
</body>
</html>
